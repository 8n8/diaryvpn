<!DOCTYPE html>
<html lang="en-GB">
  <head>
    <meta
      name="generator"
      content="HTML Tidy for HTML5 for Linux version 5.6.0"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Diary</title>
    <style>
      textarea {
        width: 100%;
      }
    </style>
  </head>
  <body>
    <form id="diaryform">
      <label for="diaryentry">Write a diary entry:</label>
      <textarea
        id="diaryentry"
        name="diaryentry"
        rows="15"
        cols="20"
        autocorrect="on"
        autocomplete="on"
        autofocus="on"
        required=""
        spellcheck="true"
      ></textarea>
      <input type="submit" value="Submit" />
    </form>
    <script>
      "use strict";

      {
        const maxEntries = 10000;
        let TIMESTAMPS = new Uint32Array(maxEntries);
        let ENTRY_ENDS = new Uint32Array(maxEntries);
        // Assume the average entry length is 1kB.
        let ENTRIES = new Uint8Array(maxEntries * 1000);

        function save() {
        }

        function onSubmitDiary(_) {
          const textBox = document.getElementById("diaryentry");
          TIMESTAMPS.push(Date.now() / (60 * 1000));
          ENTRIES.push(textBox.value);
          save();
          textBox.value = "";
        }

        document
          .getElementById("diaryform")
          .addEventListener("submit", onSubmitDiary);
      }
    </script>
  </body>
</html>
